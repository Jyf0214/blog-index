<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" href="/favicon.ico" />
    <link rel="manifest" href="/manifest.json" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#000000" />
    <title>Jyf0214's Blog Index</title>
    
    <style>
      /* 样式: 菜单按钮和侧边菜单 */
      .menu-button {
        position: absolute;
        top: 10px;
        left: 10px;
        font-size: 24px;
        cursor: pointer;
        z-index: 1000;
      }
      .side-menu {
        position: fixed;
        top: 0;
        left: 0;
        width: 250px;
        height: 100%;
        background: #ffffff;
        box-shadow: 2px 0 12px rgba(0, 0, 0, 0.2);
        transform: translateX(-100%);
        transition: transform 0.3s ease;
        z-index: 999;
        padding-top: 60px;
      }
      .side-menu.visible {
        transform: translateX(0);
      }
      .menu-content {
        padding: 15px;
        font-size: 18px;
        color: #333333;
      }
      .menu-content p {
        margin: 15px 0;
      }
      .github-info {
        position: absolute;
        bottom: 20px;
        width: 100%;
        text-align: center;
        font-size: 14px;
        color: #666666;
      }
      .menu-option {
        padding: 10px 0;
        cursor: pointer;
        color: #007bff;
      }
      .menu-option:hover {
        color: #0056b3;
      }
    </style>
  </head>
  <body>
    <div id="app"></div>

    <!-- 菜单按钮 -->
    <div class="menu-button" id="menuButton">☰</div>

    <!-- 侧边菜单 -->
    <div class="side-menu" id="sideMenu">
      <div class="menu-content">
        <div class="menu-option" id="addToHomeScreen">添加到主屏幕</div>
        <!-- 可添加更多菜单选项 -->
      </div>
      <!-- GitHub 信息 -->
      <div class="github-info">
        <p>GitHub 用户名: jyf0214</p>
        <p>账号: jyf0214</p>
      </div>
    </div>

    <script type="module" src="/src/main.ts"></script>
    <script>
      // 菜单按钮和侧边菜单的显示控制
      const menuButton = document.getElementById('menuButton');
      const sideMenu = document.getElementById('sideMenu');
      const addToHomeScreenOption = document.getElementById('addToHomeScreen');

      // 切换菜单显示状态
      menuButton.addEventListener('click', () => {
        sideMenu.classList.toggle('visible');
      });

      // 添加到主屏幕的逻辑
      let deferredPrompt;

      window.addEventListener('beforeinstallprompt', (e) => {
        e.preventDefault();
        deferredPrompt = e;
      });

      addToHomeScreenOption.addEventListener('click', () => {
        if (deferredPrompt) {
          deferredPrompt.prompt();
          deferredPrompt.userChoice.then((choiceResult) => {
            if (choiceResult.outcome === 'accepted') {
              console.log('用户已添加到主屏幕');
            } else {
              console.log('用户取消了添加到主屏幕');
            }
            deferredPrompt = null;
          });
        } else {
          alert('此设备已安装 PWA 应用或不支持此功能');
        }
      });
    </script>
  </body>
</html>